global
        log /dev/log    local0
        log /dev/log    local1 notice
        chroot /var/lib/haproxy
        stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners
        stats timeout 30s
        user haproxy
        group haproxy
        daemon

        # Default SSL material locations
        ca-base /etc/ssl/certs
        crt-base /etc/ssl/private

        # See: https://ssl-config.mozilla.org/#server=haproxy&server-version=2.0.3&config=intermediate
        ssl-default-bind-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384
        ssl-default-bind-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256
        ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets

defaults
        log     global
        mode    http
        option  dontlognull
        log-format              {\"clientIP\":\"%ci\",\"frontendName\":\"%ft\",\"backend\":\"%b\",\"bytesRead\":\"%B\",\"statusCode\":\"%ST\",\"serverIP\":\"%si\",\"serverPort\":\"%sp\",\"method\":"%{+Q}r"}
        timeout connect 5000
        timeout client  50000
        timeout server  50000
        errorfile 400 /etc/haproxy/errors/400.http
        errorfile 403 /etc/haproxy/errors/403.http
        errorfile 408 /etc/haproxy/errors/408.http
        errorfile 500 /etc/haproxy/errors/500.http
        errorfile 502 /etc/haproxy/errors/502.http
        errorfile 503 /etc/haproxy/errors/503.http
        errorfile 504 /etc/haproxy/errors/504.http
        errorfile 404 /etc/haproxy/errors/404.http

##########################################################################################
############################# FRONT END SERVERS ##########################################
##########################################################################################

frontend eagro-tapagro-staging

        bind *:80
        bind *:443 ssl crt /etc/ssl/private/eagro.az.pem ssl crt /etc/ssl/private/tapagro.az.pem ssl crt /etc/ssl/private/minagro.local.cert_chain.pem
        redirect scheme https if !{ ssl_fc }

#        option forwardfor
#        http-request set-header X-Forwarded-Port %[dst_port]
#        http-request add-header X-Forwarded-Proto https if { ssl_fc }
#        http-response set-header X-Content-Type-Options nosniff
#        http-response set-header X-XSS-Protection 1;mode=block
#        http-response set-header Strict-Transport-Security max-age=31536000;includeSubDomains;preload
#        http-response set-header Referrer-Policy no-referrer-when-downgrade

#       stick-table type ip size 100k expire 1m store http_req_rate(1s)
#        http-request track-sc0 src
#        http-request deny deny_status 429 if { sc_http_req_rate(0) gt 15 }

        stick-table type ip size 1m expire 10s store http_req_cnt


########################### EAGRO FRONT ######################################

# API's

        acl eagro_back hdr_dom(host) -i     api-preprod.eagro.az
        acl eagro_back hdr_dom(host) -i www.api-preprod.eagro.az

        acl restricted_path path -i /agroculture/api/dictionary/getInfoByReyestrNumber
        http-request track-sc0 src if restricted_path
        http-request deny if { sc0_http_req_cnt gt 10 } restricted_path

        acl analytics-api hdr_dom(host) -i     analytics-api-staging.eagro.az
        acl analytics-api hdr_dom(host) -i www.analytics-api-staging.eagro.az
        use_backend analytics-api_backend if analytics-api

        acl operational-info-api hdr_dom(host) -i     operational-info-api-staging.eagro.az
        acl operational-info-api hdr_dom(host) -i www.operational-info-api-staging.eagro.az
        use_backend operational-info-api_backend if operational-info-api

        acl laboratory-api hdr_dom(host) -i     laboratory-staging-api.eagro.az
        acl laboratory-api hdr_dom(host) -i www.laboratory-staging-api.eagro.az
        use_backend laboratory-api_backend if laboratory-api

        acl auth-api hdr_dom(host) -i     auth-api-staging.eagro.az
        acl auth-api hdr_dom(host) -i www.auth-api-staging.eagro.az
        use_backend auth-api_backend if auth-api

        acl animal-husbandry-api hdr_dom(host) -i     animal-husbandry-api-staging.eagro.az
        acl animal-husbandry-api hdr_dom(host) -i www.animal-husbandry-api-staging.eagro.az
        use_backend animal-husbandry-api_backend if animal-husbandry-api

        acl lab-coords-api hdr_dom(host) -i     lab-coordinates-staging-api.eagro.az
        acl lab-coords-api hdr_dom(host) -i www.lab-coordinates-staging-api.eagro.az
        use_backend lab-coords-api_backend if lab-coords-api

        acl land-use-api-staging hdr_dom(host) -i     land-use-api-staging.eagro.az
        acl land-use-api-staging hdr_dom(host) -i www.land-use-api-staging.eagro.az
        use_backend land-use-api-staging_backend if land-use-api-staging

        acl notification-api hdr_dom(host) -i     notification-api-staging.eagro.az
        acl notification-api hdr_dom(host) -i www.notification-api-staging.eagro.az
        use_backend notification-api_backend if notification-api

        acl sima-mobile-integration-api hdr_dom(host) -i     sima-mobile-api-staging.eagro.az
        acl sima-mobile-integration-api hdr_dom(host) -i www.sima-mobile-api-staging.eagro.az
        use_backend sima-mobile-integration-api_backend if sima-mobile-integration-api

# UI's
# APP 1

        acl app1 hdr_dom(host) -i     app1.eagro.az
        acl app1 hdr_dom(host) -i www.app1.eagro.az
        use_backend app1_backend if app1

# APP 2

        acl staging1 hdr_dom(host) -i     staging.eagro.az || app2.eagro.az
        acl staging1 hdr_dom(host) -i www.staging.eagro.az || app2.eagro.az
        use_backend app2_backend if staging1

# EGOV-DEV

        acl staging2 hdr_dom(host) -i     staging-2.eagro.az || egov-dev.eagro.az
        acl staging2 hdr_dom(host) -i www.staging-2.eagro.az || egov-dev.eagro.az
        use_backend staging2_backend if staging2

# Others

        acl lab-coordinates-ui hdr_dom(host) -i     lab-coordinates-staging.eagro.az
        acl lab-coordinates-ui hdr_dom(host) -i www.lab-coordinates-staging.eagro.az
        use_backend lab-coordinates-ui_backend if lab-coordinates-ui

        acl landuse-management-ui hdr_dom(host) -i     landuse-management-staging.eagro.az
        acl landuse-management-ui hdr_dom(host) -i www.landuse-management-staging.eagro.az
        use_backend landuse-management-ui_backend if landuse-management-ui

        acl user-management-ui hdr_dom(host) -i     user-management-staging.eagro.az
        acl user-management-ui hdr_dom(host) -i www.user-management-staging.eagro.az
        use_backend user-management-ui_backend if user-management-ui

        acl operational-info-ui hdr_dom(host) -i     operational-info-staging.eagro.az
        acl operational-info-ui hdr_dom(host) -i www.operational-info-staging.eagro.az
        use_backend operational-info-ui_backend if operational-info-ui

        acl laboratory-ui hdr_dom(host) -i     laboratory-staging.eagro.az
        acl laboratory-ui hdr_dom(host) -i www.laboratory-staging.eagro.az
        use_backend laboratory-ui_backend if laboratory-ui

        acl analytics-ui hdr_dom(host) -i     analytics-staging.eagro.az
        acl analytics-ui hdr_dom(host) -i www.analytics-staging.eagro.az
        use_backend analytics-ui_backend if analytics-ui

        acl vault hdr_dom(host) -i     ktnvault01s.eagro.az
        acl vault hdr_dom(host) -i www.ktnvault01s.eagro.az
        use_backend vault_backend if vault

        acl  meet-test hdr_dom(host) -i     meet-test.eagro.az
        use_backend meet_back if meet-test

######################### TAPAGRO API's and UI's ###################################################
######################### STAGING ##################################################################

        acl tapagro-api-stg hdr_dom(host) -i    api-staging.tapagro.az
        acl tapagro-api-stg hdr_dom(host) -i    www.api-staging.tapagro.az
        use_backend tapagro-api-stg_backend if tapagro-api-stg

#       acl network_allowed src 185.222.95.154 172.22.100.0/24 172.22.17.0/24 10.10.172.0/24 192.168.91.6/30

        acl platform-ui-stg hdr_dom(host) -i    platform-staging.tapagro.az
        acl platform-ui-stg hdr_dom(host) -i    www.platform-staging.tapagro.az
        use_backend platform-ui-stg_backend if platform-ui-stg
#       http-request deny deny_status 403 if platform-ui-stg !network_allowed

        acl tapagro-ui-stg hdr_dom(host) -i     staging.tapagro.az
        acl tapagro-ui-stg hdr_dom(host) -i     www.staging.tapagro.az
        use_backend tapagro-ui-stg_backend if tapagro-ui-stg #network_allowed
#       http-request redirect location https://www.tapagro.az if tapagro-ui !network_allowed

        acl store-ui-stg hdr_dom(host) -i       store-staging.tapagro.az
        acl store-ui-stg hdr_dom(host) -i       www.store-staging.tapagro.az
        use_backend store-ui-stg_backend if store-ui-stg
#       http-request deny deny_status 403 if store-ui-stg !network_allowed

#       acl tapagro-ui-pm2 hdr_dom(host) -i     staging-pm2.tapagro.az
#        acl tapagro-ui-pm2 hdr_dom(host) -i www.staging-pm2.tapagro.az
#        use_backend tapagro-ui-pm2_backend if tapagro-ui-pm2
#       http-request deny deny_status 403 if tapagro-ui-pm2 !network_allowed

#################### DEVELOPMENT ####################################################################

        acl tapagro-api-dev hdr_dom(host) -i    api-dev.tapagro.az
        acl tapagro-api-dev hdr_dom(host) -i    www.api-dev.tapagro.az
        use_backend tapagro-api-dev_backend if tapagro-api-dev

        acl platform-ui-dev hdr_dom(host) -i    platform-dev.tapagro.az
        acl platform-ui-dev hdr_dom(host) -i    www.platform-dev.tapagro.az
        use_backend platform-ui-dev_backend if platform-ui-dev
#        http-request deny deny_status 403 if platform-ui-dev !network_allowed

        acl tapagro-ui-dev hdr_dom(host) -i     dev.tapagro.az
        acl tapagro-ui-dev hdr_dom(host) -i     www.dev.tapagro.az
        use_backend tapagro-ui-dev_backend if tapagro-ui-dev #network_allowed
#        http-request redirect location https://www.tapagro.az if tapagro-ui !network_allowed

        acl store-ui-dev hdr_dom(host) -i       store-dev.tapagro.az
        acl store-ui-dev hdr_dom(host) -i       www.store-dev.tapagro.az
        use_backend store-ui-dev_backend if store-ui-dev
#        http-request deny deny_status 403 if store-ui-dev !network_allowed

######################################################################################################

        use_backend aas_backend if { path /aas } || { path_beg /aas/ }
        use_backend access_backend if { path /access } || { path_beg /access/ }
        use_backend agroculture_backend if { path /agroculture } || { path_beg /agroculture/ }
        use_backend approbation_backend if { path /approbation } || { path_beg /approbation/ }
        use_backend bee-monitoring_backend if { path /bee-monitoring } || { path_beg /bee-monitoring/ }
        use_backend bee-selection_backend if { path /bee-selection } || { path_beg /bee-selection/ }
        use_backend bee-subsidy_backend if { path /bee-subsidy } || { path_beg /bee-subsidy/ }
        use_backend beet-subsidy_backend if { path /beet-subsidy } || { path_beg /beet-subsidy/ }
        use_backend buildings_backend if { path /buildings } || { path_beg /buildings/ }
        use_backend cabinet_backend if { path /cabinet } || { path_beg /cabinet/ }
        use_backend cocoon-subsidy_backend if { path /cocoon-subsidy } || { path_beg /cocoon-subsidy/ }
        use_backend cocoon_backend if { path /cocoon } || { path_beg /cocoon/ }
        use_backend cotton-subsidy_backend if { path /cotton-subsidy } || { path_beg /cotton-subsidy/ }
        use_backend family-farm_backend if { path /family-farm } || { path_beg /family-farm/ }
        use_backend insurance_backend if { path /insurance } || { path_beg /insurance/ }
        use_backend integration_backend if { path /integration } || { path_beg /integration/ }
        use_backend monitoring_backend if { path /monitoring } || { path_beg /monitoring/ }
        use_backend operator_backend if { path /operator } || { path_beg /operator/ }
        use_backend payment_module_backend if { path /payment_module } || { path_beg /payment_module/ }
        use_backend plantation-subsidy_backend if { path /plantation-subsidy } || { path_beg /plantation-subsidy/ }
        use_backend product-receiver_backend if { path /product-receiver } || { path_beg /product-receiver/ }
        use_backend product-subsidy_backend if { path /product-subsidy } || { path_beg /product-subsidy/ }
        use_backend seed-subsidy_backend if { path /seed-subsidy } || { path_beg /seed-subsidy/ }
        use_backend subsidy_backend if { path /subsidy } || { path_beg /subsidy/ }
        use_backend tobacco-subsidy_backend if { path /tobacco-subsidy } || { path_beg /tobacco-subsidy/ }
        use_backend animal-husbandry-integration_backend if { path /eagro-animal-husbandry-integration-api } || { path_beg /eagro-animal-husbandry-integration-api/ }
        use_backend eagro-tapagro-integration-api_backend if { path /eagro-tapagro-integration-api } || { path_beg /eagro-tapagro-integration-api/ }
        use_backend yonca-integration_backend if { path /yonca-integration } || { path_beg /yonca-integration/ }
        use_backend eagro-nutritional-wheat_backend if { path /eagro-nutritional-wheat } || { path_beg /eagro-nutritional-wheat/ }
        use_backend asan-imza-integration_backend if { path /asan-imza-integration-api } || { path_beg /asan-imza-integration-api/ }
        use_backend eagro-farmer-scoring-api_backend if { path /eagro-farmer-scoring-api } || { path_beg /eagro-farmer-scoring-api/ }
        use_backend fallow-land-api_backend if { path /fallow-land-api } || { path_beg /fallow-land-api/ }

###########################################################################################

        acl k8s-alertmanager hdr_dom(host) -i k8s-alertmanager-stg.minagro.local
        acl k8s-alertmanager hdr_dom(host) -i www.k8s-alertmanager-stg.minagro.local
        use_backend k8s-alertmanager_backend if k8s-alertmanager

        acl k8s-grafana hdr_dom(host) -i k8s-grafana-stg.minagro.local
        acl k8s-grafana hdr_dom(host) -i www.k8s-grafana-stg.minagro.local
        use_backend k8s-grafana_backend if k8s-grafana

        acl k8s-prometheus hdr_dom(host) -i k8s-prometheus-stg.minagro.local
        acl k8s-prometheus hdr_dom(host) -i www.k8s-prometheus-stg.minagro.local
        use_backend k8s-prometheus_backend if k8s-prometheus

###########################################################################################
####################################### BACK END SERVERS ##################################
###########################################################################################

############################## EAGRO OLD APPLICATIONS BACKEND #############################

backend meet_back
        server server1 10.10.171.20:32058 check

backend aas_backend
        balance roundrobin
        server aas1 10.10.172.52:80 check cookie aas1
        http-response set-header X-Frame-Options SAMEORIGIN

backend access_backend
        balance roundrobin
        server access1 10.10.172.52:80 check cookie access1
        http-response set-header X-Frame-Options SAMEORIGIN

backend agroculture_backend
        balance roundrobin
        server agroculture1 10.10.172.52:80 check cookie agroculture1
        http-response set-header X-Frame-Options SAMEORIGIN

backend approbation_backend
        balance roundrobin
        server approbation1 10.10.172.52:80 check cookie approbation1
        http-response set-header X-Frame-Options SAMEORIGIN

backend bee-monitoring_backend
        balance roundrobin
        server bee-monitoring1 10.10.172.52:80 check cookie bee-monitoring1
        http-response set-header X-Frame-Options SAMEORIGIN

backend bee-selection_backend
        balance roundrobin
        server bee-selection1 10.10.172.52:80 check cookie bee-selection1
        http-response set-header X-Frame-Options SAMEORIGIN

backend bee-subsidy_backend
        balance roundrobin
        server bee-subsidy1 10.10.172.52:80 check cookie bee-subsidy1
        http-response set-header X-Frame-Options SAMEORIGIN

backend beet-subsidy_backend
        balance roundrobin
        server beet-subsidy1 10.10.172.52:80 check cookie beet-subsidy1
        http-response set-header X-Frame-Options SAMEORIGIN

backend buildings_backend
        balance roundrobin
        server buildings1 10.10.172.52:80 check cookie buildings1
        http-response set-header X-Frame-Options SAMEORIGIN

backend cabinet_backend
        balance roundrobin
        server cabinet1 10.10.172.52:80 check cookie cabinet1
        http-response set-header X-Frame-Options SAMEORIGIN

backend cocoon_backend
        balance roundrobin
        server cocoon1 10.10.172.52:80 check cookie cocoon1
        http-response set-header X-Frame-Options SAMEORIGIN

backend cocoon-subsidy_backend
        balance roundrobin
        server cocoon-subsidy1 10.10.172.52:80 check cookie cocoon-subsidy1
        http-response set-header X-Frame-Options SAMEORIGIN

backend cotton-subsidy_backend
        balance roundrobin
        server cotton-subsidy1 10.10.172.52:80 check cookie cotton-subsidy1
        http-response set-header X-Frame-Options SAMEORIGIN

backend family-farm_backend
        balance roundrobin
        server family-farm1 10.10.172.52:80 check cookie family-farm1
        http-response set-header X-Frame-Options SAMEORIGIN

backend insurance_backend
        balance roundrobin
        server insurance1 10.10.172.52:80 check cookie insurance1
        http-response set-header X-Frame-Options SAMEORIGIN

backend integration_backend
        balance roundrobin
        server integration1 10.10.172.52:80 check cookie integration1
        http-response set-header X-Frame-Options SAMEORIGIN

backend monitoring_backend
        balance roundrobin
        server monitoring1 10.10.172.52:80 check cookie monitoring1
        http-response set-header X-Frame-Options SAMEORIGIN

backend operator_backend
        balance roundrobin
        server operator1 10.10.172.52:80 check cookie operator1
        http-response set-header X-Frame-Options SAMEORIGIN

backend payment_module_backend
        balance roundrobin
        server payment_module1 10.10.172.52:80 check cookie payment_module1
        http-response set-header X-Frame-Options SAMEORIGIN

backend plantation-subsidy_backend
        balance roundrobin
        server plantation-subsidy1 10.10.172.52:80 check cookie plantation-subsidy1
        http-response set-header X-Frame-Options SAMEORIGIN

backend product-receiver_backend
        balance roundrobin
        server product-receiver1 10.10.172.52:80 check cookie product-receiver1
        http-response set-header X-Frame-Options SAMEORIGIN

backend product-subsidy_backend
        balance roundrobin
        server product-subsidy1 10.10.172.52:80 check cookie product-subsidy1
        http-response set-header X-Frame-Options SAMEORIGIN

backend seed-subsidy_backend
        balance roundrobin
        server seed-subsidy1 10.10.172.52:80 check cookie seed-subsidy1
        http-response set-header X-Frame-Options SAMEORIGIN

backend subsidy_backend
        balance roundrobin
        server subsidy1 10.10.172.52:80 check cookie subsidy1
        http-response set-header X-Frame-Options SAMEORIGIN

backend tobacco-subsidy_backend
        balance roundrobin
        server tobacco-subsidy1 10.10.172.52:80 check cookie tobacco-subsidy1
        http-response set-header X-Frame-Options SAMEORIGIN

############################## EAGRO NEW APPLICATIONS BACKEND #############################

# API'S

backend analytics-api_backend
        balance roundrobin
        server staging-tomcat 10.10.172.48:7002 check cookie s1
        acl homepage_analytics path /
        http-request deny deny_status 404 if homepage_analytics

backend operational-info-api_backend
        balance roundrobin
#        server staging-tomcat 10.10.172.48:7003 check cookie s1
        server operational-info-api1 10.10.172.52:80 check cookie operational-info-api1
        acl homepage_operational path /
        http-request deny deny_status 404 if homepage_operational
        http-response set-header X-Frame-Options SAMEORIGIN

backend laboratory-api_backend
        balance roundrobin
        server laboratory-api1 10.10.172.52:80 check cookie laboratory-api1
        acl homepage_laboratory path /
        http-request deny deny_status 404 if homepage_laboratory
        http-response set-header X-Frame-Options SAMEORIGIN

backend auth-api_backend
        balance roundrobin
        server auth-api1 10.10.172.52:80 check cookie auth-api1
        http-response set-header X-Frame-Options SAMEORIGIN

backend animal-husbandry-api_backend
        balance roundrobin
#        server staging-tomcat 10.10.172.48:7015 check cookie s1
        server animal-husbandry-api1 10.10.172.52:80 check cookie animal-husbandry-api1
        acl homepage_ah path /
        http-request deny deny_status 404 if homepage_ah
#       http-response set-header X-Frame-Options SAMEORIGIN

backend lab-coords-api_backend
        balance roundrobin
#        server staging-tomcat 10.10.172.48:7011 check cookie s1
        server lab-coords-api1 10.10.172.52:80 check cookie lab-coords-api1
        acl homepage_sample path /
        http-request deny deny_status 404 if homepage_sample
        http-response set-header X-Frame-Options SAMEORIGIN

backend land-use-api-staging_backend
        balance roundrobin
#        server land-use-api1 10.10.172.48:7016 check cookie land-use-api1
        server land-use-api1 10.10.172.52:80 check cookie land-use-api1
        acl homepage_landuse path /
        http-request deny deny_status 404 if homepage_landuse
#       http-response set-header X-Frame-Options SAMEORIGIN

backend animal-husbandry-integration_backend
        balance roundrobin
        server animal-husbandry-integration1 10.10.172.52:80 check cookie animal-husbandry-integration1
        http-response set-header X-Frame-Options SAMEORIGIN

backend eagro-tapagro-integration-api_backend
        balance roundrobin
        server tapagro-integration1 10.10.172.52:80 check cookie tapagro-integration1
        http-response set-header X-Frame-Options SAMEORIGIN

backend yonca-integration_backend
        balance roundrobin
        server tapagro-integration1 10.10.172.52:80 check cookie tapagro-integration1
        http-response set-header X-Frame-Options SAMEORIGIN

backend eagro-nutritional-wheat_backend
        balance roundrobin
        server nutritional-wheat1 10.10.172.52:80 check cookie nutritional-wheat1
        http-response set-header X-Frame-Options SAMEORIGIN

backend notification-api_backend
        balance roundrobin
#        server notification-api-staging 10.10.172.48:7017 check cookie s1
        server notification-api1 10.10.172.52:80 check cookie notification-api1
        http-response set-header X-Frame-Options SAMEORIGIN

backend sima-mobile-integration-api_backend
        balance roundrobin
        server sima-mobile-integration1 10.10.172.52:80 check cookie sima-mobile-integration1
        http-response set-header X-Frame-Options SAMEORIGIN

backend asan-imza-integration_backend
        balance roundrobin
        server asan-imza-integration1 10.10.172.52:80 check cookie asan-imza-integration1
        http-response set-header X-Frame-Options SAMEORIGIN

backend eagro-farmer-scoring-api_backend
        balance roundrobin
        server farmer-scoring-api1 10.10.172.52:80 check cookie farmer-scoring-api1
        http-response set-header X-Frame-Options SAMEORIGIN

backend fallow-land-api_backend
        balance roundrobin
        server fallow-land-api1 10.10.172.52:80 check cookie fallow-land-api1
        http-response set-header X-Frame-Options SAMEORIGIN

# UI's

backend app1_backend
        balance roundrobin
        server app1_1 10.10.172.52:80 check cookie app1_1
        http-response set-header Referrer-Policy no-referrer-when-downgrade

backend app2_backend
        balance roundrobin
        server staging-ui_1 10.10.172.52:80 check cookie staging-ui_1
        http-response set-header X-Frame-Options SAMEORIGIN

backend staging2_backend
        balance roundrobin
        server staging2_1 10.10.172.52:80 check cookie staging2_1
        http-response set-header X-Frame-Options SAMEORIGIN

backend lab-coordinates-ui_backend
        balance roundrobin
        server lab-coordinates-ui_backend 10.10.172.52:80 check cookie lab-coordinates-ui_backend
        http-response set-header X-Frame-Options SAMEORIGIN

backend landuse-management-ui_backend
        balance roundrobin
        server landuse-management1 10.10.172.52:80 check cookie landuse-management1
        http-response set-header X-Frame-Options SAMEORIGIN

backend user-management-ui_backend
        balance roundrobin
        server user-management1 10.10.172.52:80 check cookie usera-management1
        http-response set-header X-Frame-Options SAMEORIGIN

backend operational-info-ui_backend
        balance roundrobin
        server operational-info1 10.10.172.52:80 check cookie operational-info1
        http-response set-header X-Frame-Options SAMEORIGIN

backend laboratory-ui_backend
        balance roundrobin
        server laboratory-ui1 10.10.172.52:80 check cookie laboratory-ui1
        http-response set-header X-Frame-Options SAMEORIGIN

backend analytics-ui_backend
        balance roundrobin
        server analytics-ui1 10.10.172.52:80 check cookie analytics-ui1

backend vault_backend
        balance roundrobin
        server staging-tomcat 10.10.172.33:8200 check ssl verify none
        http-response set-header X-Frame-Options SAMEORIGIN

############################## TAPAGRO ################################################
backend tapagro-api-stg_backend
        balance roundrobin
        server tapagro-api-stg1 10.10.172.21:7002 check cookie tapagro-api-stg1
        acl homepage_tapagro path /
        http-request deny deny_status 404 if homepage_tapagro
        http-response set-header X-Frame-Options SAMEORIGIN

backend platform-ui-stg_backend
        balance roundrobin
        server platform-ui-stg1 10.10.172.22:80 check cookie platform-ui-stg1
        http-response set-header X-Frame-Options SAMEORIGIN

backend tapagro-ui-stg_backend
        balance roundrobin
#        server tapagro-ui-stg1 10.10.172.22:80 check cookie tapagro-ui-stg1
        server tapagro-ui-stg1 10.10.172.22:3000 check cookie tapagro-ui-stg1
        http-response set-header X-Frame-Options SAMEORIGIN

backend store-ui-stg_backend
        balance roundrobin
        server store-ui-stg1 10.10.172.22:80 check cookie store-ui-stg1
        http-response set-header X-Frame-Options SAMEORIGIN

#backend tapagro-ui-pm2_backend
#        balance roundrobin
#        server tapagro-ui-pm2 10.10.172.22:3000 check cookie tapagro-ui-pm2
#       http-response set-header X-Frame-Options SAMEORIGIN

backend tapagro-api-dev_backend
        balance roundrobin
        server tapagro-api-dev1 10.10.172.11:7002 check cookie tapagro-api-dev1
        acl homepage_tapagro path /
        http-request deny deny_status 404 if homepage_tapagro
        http-response set-header X-Frame-Options SAMEORIGIN

backend platform-ui-dev_backend
        balance roundrobin
        server platform-ui-dev1 10.10.172.12:80 check cookie platform-ui-dev1
        http-response set-header X-Frame-Options SAMEORIGIN

backend tapagro-ui-dev_backend
        balance roundrobin
        server tapagro-ui-dev1 10.10.172.12:3000 check cookie tapagro-ui-dev1
        http-response set-header X-Frame-Options SAMEORIGIN

backend store-ui-dev_backend
        balance roundrobin
        server store-ui-dev1 10.10.172.12:80 check cookie store-ui-dev1
        http-response set-header X-Frame-Options SAMEORIGIN
############################################################################################

backend k8s-alertmanager_backend
        balance roundrobin
        server k8s-alertmanager1 10.10.172.52:80 check cookie k8s-alertmanager1
        http-response set-header X-Frame-Options SAMEORIGIN

backend k8s-grafana_backend
        balance roundrobin
        server k8s-grafana1 10.10.172.52:80 check cookie k8s-grafana1
        http-response set-header X-Frame-Options SAMEORIGIN

backend k8s-prometheus_backend
        balance roundrobin
        server k8s-prometheus1 10.10.172.52:80 check cookie k8s-prometheus1
        http-response set-header X-Frame-Options SAMEORIGIN
